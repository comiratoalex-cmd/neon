// ============ UPDATE BORDER ============
function updateBorder() {
  const preview = document.getElementById("preview");

  const colors = [
    c1.value, c2.value, c3.value,
    c4.value, c5.value, c6.value
  ];

  preview.style.background = `linear-gradient(90deg, ${colors.join(",")})`;
  preview.style.backgroundSize = "400% 400%";

  applyShape(borderType.value);
  generateOBSLink();
}

// ============ PRESETS ============
presetSelect.addEventListener("change", () => {
  applyPreset(presetSelect.value);
});

// ============ RGB MODES ============
function applyRGBMode() {
  const val = rgbMode.value;

  if (val === "off") {
    preview.style.animation = "none";
  }

  if (val === "rainbow") {
    preview.style.animation = "rgbRainbow 4s infinite linear";
  }

  if (val === "smooth") {
    preview.style.animation = "rgbSmooth 6s infinite linear";
  }
}

rgbMode.addEventListener("change", applyRGBMode);

// RGB Keyframes
const style = document.createElement("style");
style.innerHTML = `
@keyframes rgbRainbow {
  0%{ filter:hue-rotate(0deg); }
  100%{ filter:hue-rotate(360deg); }
}
@keyframes rgbSmooth {
  0%{ filter:hue-rotate(0deg); }
  100%{ filter:hue-rotate(720deg); }
}
`;
document.head.appendChild(style);

// ============ PNG MODE ============
pngUpload.addEventListener("change", () => {
  document.getElementById("borderType").value = "png";
  applyShape("png");
});

// ============ THEME TOGGLE ============
toggleTheme.addEventListener("click", () => {
  document.body.classList.toggle("light");
});

// ============ EXPORT WEBM ============
exportWebm.addEventListener("click", () => {
  alert("Export WEBM ainda Ã© placeholder ðŸ˜…");
});

// ============ COLLAPSE MENU ============
collapseBtn.onclick = () => {
  sidebar.classList.toggle("collapsed");
};

// ============ START ============
document.querySelectorAll("input,select").forEach(el =>
  el.addEventListener("input", updateBorder)
);

updateBorder();
applyRGBMode();
